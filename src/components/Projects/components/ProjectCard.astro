---
import type { ImageMetadata } from "astro";
import Button from "../../SocialButton.astro";
import github from "/src/assets/svg/github.svg";
import vercel from "/src/assets/svg/vercel_dark.svg";
import TechTag from "./TechTag.astro";
import { Picture, getImage } from "astro:assets";

const {
  id,
  imgOrder,
  projectImgUrl,
  tecnologies,
  title,
  description,
  codeUrl,
  previewUrl,
} = Astro.props;

const optimazeImage = await getImage({
  src: projectImgUrl,
  format: ["avif, webp"],
});
---

<article
  id={id}
  class={`flex flex-col lg:flex-row gap-10 my-14 mx-auto transition duration-300 hover:scale-105`}
>
  <div
    class={`relative aspect-video bg-black/20 rounded-3xl overflow-hidden order-[${imgOrder}] max-lg:order-none`}
  >
    <Picture
      loading="eager"
      width={1920}
      height={1080}
      class="h-full md:scale-110"
      src={projectImgUrl}
      formats={["avif", "webp"]}
      alt="Marcos Frias Molina Avatar"
    />
    <div
      id="skillsLabels"
      class="flex flex-row flex-wrap gap-3 absolute bottom-3 left-3"
    >
      {
        tecnologies.map(
          (item: { name: string; svg: ImageMetadata; color: string }) => (
            <TechTag text={item.name} svg={item.svg} color={item?.color} />
          )
        )
      }
    </div>
  </div>
  <div class="flex flex-col gap-5 lg:w-full">
    <h3 class="text-2xl">
      <span class="radient-animation font-italianno text-5xl">
        {title}
      </span>
    </h3>

    <p class="text-xl text-balance w-full opacity-70">{description}</p>
    <div id="linkButtons" class="flex flex-row flex-nowrap gap-3">
      {
        codeUrl ? (
          <Button text="Codice sorgente" svg={github} href={codeUrl} />
        ) : (
          ""
        )
      }
      <Button text="Live Preview" svg={vercel} href={previewUrl} />
    </div>
  </div>
</article>
